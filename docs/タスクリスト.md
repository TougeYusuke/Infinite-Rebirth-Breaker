# Infinite Rebirth Breaker - タスクリスト

**最終更新:** 2026-01-02  
**現在のフェーズ:** Phase 3完了 → Phase 4（進行システム）準備完了

---

## 📊 全体進捗状況

| フェーズ | 進捗率 | ステータス |
|---------|--------|-----------|
| Phase 1: 基本環境構築 | 100% | ✅ 完了 |
| Phase 2: コアシステム実装 | 100% | ✅ 完了 |
| Phase 3: バトルシステム | 100% | ✅ 完了 |
| Phase 4: 進行システム | 0% | ⚪ 未着手 |
| Phase 5: 転生システム | 0% | ⚪ 未着手 |
| Phase 6: コンボシステム | 0% | ⚪ 未着手 |
| Phase 7: ポリッシュ | 0% | ⚪ 未着手 |

**全体進捗:** 43% (3/7フェーズ完了)

---

## Phase 1: 基本環境構築 ✅ 完了

### 1.1 プロジェクト構造の作成
- [x] ディレクトリ構造の作成
- [x] 基本ファイルの配置
- [x] ドキュメント構造の作成

### 1.2 TypeScript + Vite環境構築
- [x] package.json の作成
- [x] tsconfig.json の設定
- [x] vite.config.ts の設定
- [x] パスエイリアス（@/*）の設定

### 1.3 Phaser 3統合
- [x] Phaser 3のインストール
- [x] 基本的なゲーム設定（main.ts）
- [x] シーン構造の基本実装

### 1.4 break_infinity.js統合
- [x] break_infinity.jsのインストール
- [x] 型定義ファイル（break_infinity.d.ts）の作成

### 1.5 Git環境構築
- [x] Gitリポジトリの初期化
- [x] .gitignore の作成
- [x] 初回コミット準備完了

### 1.6 テスト環境構築
- [x] Vitestのインストールと設定
- [x] jsdom環境の設定
- [x] テストファイルの基本構造
- [x] GitHub Actionsワークフローの作成

**完了日:** 2026-01-01

---

## Phase 2: コアシステム実装 ✅ 完了（100%）

### 2.1 Decimal型ラッパーの実装 ✅ 完了
- [x] `src/utils/Decimal.ts` の作成（2026-01-01）
- [x] Decimal型の便利メソッドの実装（2026-01-01）
- [x] テストファイルの作成（2026-01-01）
- [x] テスト通過確認（49テストすべてパス）

### 2.2 数値フォーマッターの実装 ✅ 完了
- [x] `src/utils/Formatter.ts` の実装
- [x] 短縮表記（10k, 10M, 10B, 10aa）の実装
- [x] テストファイル（Formatter.test.ts）の作成
- [x] テスト通過確認

### 2.3 LocalStorage管理の実装 ✅ 完了
- [x] `src/utils/Storage.ts` の実装
- [x] loadSaveData() の実装
- [x] saveSaveData() の実装
- [x] resetSaveData() の実装
- [x] テストファイル（Storage.test.ts）の作成
- [x] テスト通過確認

### 2.4 基本的なPhaserシーン構造 ✅ 完了
- [x] `src/scenes/BootScene.ts` の実装
- [x] `src/scenes/BattleScene.ts` の基本実装
- [x] シーン遷移の基本構造

### 2.5 型定義の実装 ✅ 完了
- [x] `src/types/SaveData.ts` の実装
- [x] `src/types/GameState.ts` の実装
- [x] `src/types/break_infinity.d.ts` の実装

**完了日:** 2026-01-01

---

## Phase 3: バトルシステム ✅ 完了（100%）

### 3.1 敵クラスの実装 ✅ 完了
- [x] `src/core/Enemy.ts` の作成（2026-01-02）
- [x] HP計算式の実装（`baseHP * (stage ^ 1.2)`）（2026-01-02）
- [x] ダメージ処理の実装（2026-01-02）
- [x] 敵の状態管理（2026-01-02）
- [x] テストファイルの作成（2026-01-02）

### 3.2 攻撃システム（Auto/Tap）の実装 ✅ 完了
- [x] `src/core/Battle.ts` の作成（2026-01-02）
- [x] Auto Attack（1秒ごと）の実装（2026-01-02）
- [x] Tap Attack（画面タップ）の実装（2026-01-02）
- [x] ダメージ計算ロジック（2026-01-02）
- [x] 攻撃速度の管理（2026-01-02）
- [x] テストファイルの作成（2026-01-02）

### 3.3 ダメージポップアップの実装 ✅ 完了
- [x] `src/ui/DamagePopup.ts` の作成（2026-01-02）
- [x] ポップアップアニメーション（2026-01-02）
- [x] 数値フォーマット表示（2026-01-02）
- [x] 色の変更（小→青、中→黄、大→赤）（2026-01-02）
- [x] フェードアウト処理（2026-01-02）

### 3.4 HPバーの実装 ✅ 完了
- [x] HPバーUIコンポーネントの作成（`src/ui/HPBar.ts`）（2026-01-02）
- [x] リアルタイム更新処理（2026-01-02）
- [x] グラデーション表示（2026-01-02）

### 3.5 BattleSceneの統合 ✅ 完了
- [x] BattleSceneへの統合（2026-01-02）
- [x] タップイベントの実装（2026-01-02）
- [x] Auto Attackの統合（2026-01-02）
- [x] ステージ進行の実装（2026-01-02）

**完了日:** 2026-01-02

---

## Phase 4: 進行システム ⚪ 未着手

### 4.1 ステージ進行の実装
- [ ] `src/systems/Stage.ts` の作成
- [ ] ステージ進行ロジック
- [ ] 敵の自動生成
- [ ] ステージ表示の更新

### 4.2 タイマーシステムの実装
- [ ] `src/systems/Timer.ts` の作成
- [ ] 30秒カウントダウンの実装
- [ ] タイマーバーの表示
- [ ] 時間切れ時の処理

### 4.3 ゲームオーバー処理の実装
- [ ] `src/scenes/GameOverScene.ts` の作成
- [ ] 到達ステージの表示
- [ ] 獲得転生石の計算
- [ ] シーン遷移の実装

---

## Phase 5: 転生システム ⚪ 未着手

### 5.1 転生石計算の実装
- [ ] `src/systems/Rebirth.ts` の作成
- [ ] 転生石獲得式の実装（`Math.floor(stage ^ 1.5)`）
- [ ] 転生石の保存処理

### 5.2 強化メニューの実装
- [ ] `src/systems/Upgrade.ts` の作成
- [ ] `src/scenes/UpgradeScene.ts` の作成
- [ ] 攻撃力LvUPの実装
- [ ] コスト計算（`10 * (currentLevel + 1)`）
- [ ] 効果計算（`1.1 * level` 倍率）

### 5.3 再開選択機能の実装
- [ ] 「最初から無双する（Full Run）」ボタン
- [ ] 「前線へ復帰（Quick Skip）」ボタン
- [ ] 開始地点の計算ロジック
- [ ] シーン遷移の実装

---

## Phase 6: コンボシステム ⚪ 未着手

### 6.1 コンボゲージの実装
- [ ] `src/systems/Combo.ts` の作成
- [ ] コンボ数のカウント
- [ ] コンボのリセット処理

### 6.2 コンボ倍率の実装
- [ ] 倍率計算（`1 + (combo * 0.1)`、最大10倍）
- [ ] 転生石獲得倍率の適用
- [ ] 攻撃速度倍率の適用

### 6.3 コンボ表示の実装
- [ ] コンボ数のUI表示
- [ ] コンボゲージの表示
- [ ] アニメーション処理

---

## Phase 7: ポリッシュ ⚪ 未着手

### 7.1 UI/UXの改善
- [ ] レスポンシブデザインの最適化
- [ ] ボタンサイズの調整（最小44x44px）
- [ ] タッチ操作の最適化

### 7.2 アニメーションの追加
- [ ] 画面遷移アニメーション
- [ ] ダメージポップアップの改善
- [ ] HPバーのアニメーション

### 7.3 バランス調整
- [ ] 敵HPのバランス調整
- [ ] ダメージ計算の調整
- [ ] 転生石獲得量の調整

### 7.4 パフォーマンス最適化
- [ ] 60fps維持の確認
- [ ] メモリ使用量の最適化（100MB以下）
- [ ] ロード時間の最適化（3秒以内）

---

## 🧪 テスト状況

### 完了したテスト
- ✅ Formatter.test.ts (5 tests) - すべてパス
- ✅ Storage.test.ts (4 tests) - すべてパス
- ✅ Decimal.test.ts (40 tests) - すべてパス
- ✅ Enemy.test.ts (8 tests) - すべてパス
- ✅ Battle.test.ts (14 tests) - すべてパス

**合計:** 71テスト（すべてパス）

### 未実装のテスト
- [ ] Enemy.test.ts
- [ ] Battle.test.ts
- [ ] Rebirth.test.ts
- [ ] Upgrade.test.ts
- [ ] Combo.test.ts
- [ ] Timer.test.ts

**テストカバレッジ目標:** 80%以上

---

## 📝 次のアクション

### 即座に着手すべきタスク（優先度: 高）

1. **Decimal型ラッパーの実装**（Phase 2の残りタスク）
   - 見積もり: 1-2時間
   - 依存関係: なし
   - 次のフェーズへの影響: 高（バトルシステムで必要）

2. **敵クラスの実装**（Phase 3の開始）
   - 見積もり: 2-3時間
   - 依存関係: Decimal型ラッパー
   - 次のフェーズへの影響: 高（バトルシステムの基盤）

3. **攻撃システムの実装**（Phase 3）
   - 見積もり: 3-4時間
   - 依存関係: 敵クラス、Decimal型ラッパー
   - 次のフェーズへの影響: 高（ゲームのコア機能）

---

## 📈 進捗更新方法

このファイルは定期的に更新してください。完了したタスクには `[x]` を付け、日付を記録します。

**更新例:**
```markdown
### 2.1 Decimal型ラッパーの実装
- [x] `src/utils/Decimal.ts` の作成（2026-01-01）
- [x] Decimal型の便利メソッドの実装（2026-01-01）
```

---

**最終更新:** 2026-01-01  
**次回更新予定:** Phase 2完了時

